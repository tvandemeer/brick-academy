class Mandje{constructor(e){this.klant=e,this.artikelen=[]}}class Artikel{constructor(e,t,a){this.part_num=e,this.naam=t,this.prijs=a}}const getUrl="https://rebrickable.com/api/v3/lego/parts/",page_size="20";let page="1";if(!localStorage.getItem("winkelmandjes")){const e={};localStorage.setItem("winkelmandjes",JSON.stringify(e)),console.log(JSON.parse(localStorage.getItem("winkelmandjes")))}let live_klant;sessionStorage.getItem("live_klant")?(console.log("Ingelogde klant"),live_klant=JSON.parse(sessionStorage.getItem("live_klant"))):console.log("Geen klant ingelogd"),console.log(live_klant);const mandjes=JSON.parse(localStorage.getItem("winkelmandjes"));if(mandjes[live_klant.naam])console.log("Klant heeft een mandje");else{console.log("Klant heeft nog geen mandje");const f=new Mandje(live_klant.naam);mandjes[live_klant.naam]=f,localStorage.setItem("winkelmandjes",JSON.stringify(mandjes)),console.log("Mandje gemaakt voor klant")}async function getParts(e=""){return(await fetch(e,{method:"GET",headers:{Authorization:"key bc4537b496eaab6056e0ce49fb54bc55"}})).json()}function createPartsList(e){e.results.forEach(e=>{createPartEl(e.part_num,e.name,e.part_img_url,e.part_url)});var t=e.previous,e=e.next,a=document.createElement("div"),n=(a.id="pages_nav_div",a.classList.add("uk-container"),a.classList.add("uk-flex"),a.classList.add("uk-flex-between"),a.classList.add("uk-margin-top"),a.classList.add("uk-margin-bottom"),document.createElement("div")),s=document.createElement("a"),d=document.createElement("span"),t=(s.classList.add("uk-button"),s.classList.add("uk-button-default"),s.classList.add("pages-nav"),s.type="button",t?s.href=t:(s.href="#",s.style.color="#999999",s.style.cursor="not-allowed"),d.setAttribute("uk-icon","icon: chevron-left"),s.innerText="vorige",n.appendChild(d),n.appendChild(s),a.appendChild(n),document.createElement("div")),d=document.createElement("a"),s=document.createElement("span");d.classList.add("uk-button"),d.classList.add("uk-button-default"),d.classList.add("pages-nav"),d.type="button",e?d.href=e:(d.href="#",d.style.color="#999999",d.style.cursor="not-allowed"),s.setAttribute("uk-icon","icon: chevron-right"),d.innerText="volgende",t.appendChild(d),t.appendChild(s),a.appendChild(t),document.body.appendChild(a),pagesNavListeners(),addCartListeners()}function createPartEl(e,t,a,n){var s=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div"),u=document.createElement("p"),m=document.createElement("div"),p=document.createElement("span"),g=document.createElement("img"),k=document.createElement("a"),h=document.createElement("span"),L=document.createElement("a"),v=document.createElement("span"),a=(h.setAttribute("uk-icon","icon: cart; ratio: 2"),v.setAttribute("uk-icon","icon: link"),g.id=e,g.src=a||"img/geen_afbeelding.jpg",s.classList.add("part_wrap"),s.classList.add("uk-flex"),d.classList.add("uk-card"),d.classList.add("uk-flex"),d.classList.add("uk-flex-column"),d.classList.add("uk-card-default"),d.classList.add("animate__animated"),d.classList.add("animate__fadeIn"),d.classList.add("animate__slow"),m.classList.add("uk-position-bottom"),l.classList.add("uk-card-media-top"),i.classList.add("uk-card-body"),u.classList.add("uk-card-title"),p.classList.add("price"),l.appendChild(g),d.appendChild(l),u.innerText=t,r.appendChild(u),c.classList.add("uk-margin-bottom"),c.classList.add("uk-text-right"),L.classList.add("uk-button"),L.classList.add("uk-button-default"),L.classList.add("uk-button-small"),m.classList.add("uk-text-right"),L.classList.add("part-detail"),L.href=n,L.setAttribute("target","_blank"),L.innerText="details",L.appendChild(v),o.appendChild(L),(5*Math.random()).toFixed(2));p.innerText="â‚¬"+a.toString(),k.href="#",k.innerText="+ ",k.type="button",k.setAttribute("data-part",e),k.setAttribute("data-naam",t),k.setAttribute("data-prijs",a),k.classList.add("uk-button"),k.classList.add("uk-button-primary"),k.classList.add("uk-button-primary"),k.classList.add("uk-margin-bottom"),k.classList.add("uk-margin-right"),k.classList.add("uk-border-rounded"),k.classList.add("add-button"),k.classList.add("uk-button-small"),m.appendChild(p),m.appendChild(k),c.appendChild(h),i.appendChild(r),i.appendChild(o),i.appendChild(c),i.appendChild(m),d.appendChild(i),s.appendChild(d),parts_list.appendChild(s)}function pagesNavListeners(){document.querySelectorAll(".pages-nav").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();e=e.target.href.split("&");(page=e[1]||"2"!==page?e[1]?e[0].split("=")[1]:0:"1")&&(document.querySelectorAll(".part_wrap").forEach(e=>{e.remove()}),document.getElementById("pages_nav_div").remove(),getParts(url=`${getUrl}?page=${page}&page_size=`+page_size).then(e=>{createPartsList(e)}))})})}function addCartListeners(){document.querySelectorAll(".add-button").forEach(e=>{e.addEventListener("click",e=>{var t=JSON.parse(sessionStorage.getItem("live_klant")),a=JSON.parse(localStorage.getItem("winkelmandjes")),n=e.target.dataset.part,s=e.target.dataset["naam"],e=e.target.dataset["prijs"],n=new Artikel(n,s,e);console.log(n),a[t.naam].artikelen.push(n),localStorage.setItem("winkelmandjes",JSON.stringify(a)),console.log("Artikel toegevoegd aan mandje")})})}window.onload=()=>{document.getElementById("parts_list")},getParts(url=`${getUrl}?page=${page}&page_size=`+page_size).then(e=>{createPartsList(e)});