import{updateNavbar}from"./navbar.js";import{getLiveKlant}from"./storageItems.js";import{showMessage}from"./notify.js";import{populateSelect}from"./adminUi.js";updateNavbar();const live_klant=getLiveKlant();live_klant?live_klant&&!live_klant.admin?showMessage("Geen admin","Je hebt geen admin rechten!","error"):live_klant&&live_klant.admin&&(JSON.parse(sessionStorage.getItem("admin-greet"))||(sessionStorage.setItem("admin-greet",1),showMessage(`Welkom ${live_klant.naam}!`,"Gebruik je admin rechten met zorg :)","success")),populateSelect()):showMessage("Niet ingelogd","Je moet ingelogd zijn als admin!","warning");import{getKlanten,getMandjes}from"./storageItems.js";import{confirmDeleteKlant,confirmDeleteMandje,showToast}from"./notify.js";import{updateNavbar}from"./navbar.js";const Swal=window["Swal"];function deleteKlant(e){e=e.target.dataset.klant;confirmDeleteKlant(e,"Weet je het zeker?","De actie kan niet ongedaan gemaakt worden","warning")}function deleteMandje(e){e=e.target.dataset.klant;getMandjes()[e]?console.log("Verwijder mandje van "+e):console.log("Klant heeft geen mandje")}function deleteArtikel(e){var t=e.target.dataset["klant"],e=parseInt(e.target.dataset.index),a=getMandjes(),n=a[t],s=n.artikelen.splice(e,1);if(s[0]){a[t]=n,localStorage.setItem("mandjes",JSON.stringify(a)),document.querySelector(`tr[data-row="${e}"`).remove();var l=document.querySelectorAll("#results-table-body tr"),r=document.querySelectorAll("#results-table-body button");for(let e=0;e<n.artikelen.length;e++)l[e].setAttribute("data-row",e),r[e].setAttribute("data-index",e);updateNavbar(),showToast("Verwijderd",s[0].naam,"success")}else console.log("Er ging iets mis, maar weet nog niet wat")}function populateResults(e){var t=getMandjes(),a=document.getElementById("results-table-body"),n=document.querySelectorAll("#results-table-body tr"),s=(n.length&&n.forEach(e=>{e.remove()}),e.target.value);if("selecteer klant ..."!=s){if(t[s]&&t[s].artikelen.length){var l=t[s]["artikelen"];for(let e=0;e<l.length;e++){var r=document.createElement("tr"),o=(r.setAttribute("data-row",e),document.createElement("td")),i=document.createElement("td"),d=document.createElement("td"),c=document.createElement("td"),m=document.createElement("button");c.classList.add("uk-text-right"),m.classList.add("uk-button"),m.classList.add("uk-button-danger"),m.classList.add("uk-button-small"),m.type="button",m.setAttribute("data-index",e),m.setAttribute("data-klant",s),m.innerText="X",m.addEventListener("click",deleteArtikel),o.innerText=l[e].id,i.innerText=l[e].naam,d.innerText=l[e].prijs,c.appendChild(m),r.appendChild(o),r.appendChild(i),r.appendChild(d),r.appendChild(c),a.appendChild(r)}}else{var n=document.createElement("tr"),e=document.createElement("td"),t=document.createElement("td"),u=document.createElement("td");e.innerText="---",t.innerText="Geen artikelen in mandje",u.innerText="---",n.appendChild(e),n.appendChild(t),n.appendChild(u),a.appendChild(n)}document.getElementById("delete-klant-btn").setAttribute("data-klant",s),document.getElementById("delete-mandje-btn").setAttribute("data-klant",s)}else console.log("geen klant geselecteerd")}function populateSelect(){var e=document.getElementById("select-element"),t=(document.querySelectorAll("#select-element option").forEach(e=>{e.remove()}),document.querySelectorAll("#results-table-body tr")),a=(t.length&&t.forEach(e=>{e.remove()}),getKlanten()),t=document.createElement("option");e.appendChild(t),t.innerText="selecteer klant ...";for(const s in a){var n=document.createElement("option");n.innerText=a[s].naam,e.appendChild(n)}e.addEventListener("change",populateResults),document.getElementById("delete-klant-btn").addEventListener("click",deleteKlant),document.getElementById("delete-mandje-btn").addEventListener("click",deleteMandje)}class Klant{constructor(e,t){this.naam=e,this.admin=t}}class Mandje{constructor(e){this.klant=e,this.artikelen=[]}}class Artikel{constructor(e,t,a){this.id=e,this.naam=t,this.prijs=a}}import{updateNavbar}from"./navbar.js";updateNavbar();import{getLiveKlant,getMandjes}from"./storageItems.js";import{Mandje,Artikel}from"./classes.js";import{showMessage}from"./notify.js";async function getParts(e,t){return(await fetch(`https://rebrickable.com/api/v3/lego/parts/?page=${e}&page_size=`+t,{method:"GET",headers:{Authorization:"key bc4537b496eaab6056e0ce49fb54bc55"}})).json()}function buildPage(e,t){getParts(e,t).then(e=>{var t=document.querySelectorAll(".part_wrap"),a=document.getElementById("pages_nav_div");t&&t.forEach(e=>{e.remove()}),a&&a.remove(),createPartsList(e),pageNavListeners(),addCartListeners()})}function createPartEl(e,t,a,n){var s=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),i=document.createElement("p"),d=document.createElement("div"),c=(d.classList.add("uk-width-1-2"),document.createElement("div")),m=(c.classList.add("uk-width-1-2"),document.createElement("p")),u=(m.classList.add("price"),document.createElement("img")),g=document.createElement("div"),p=(g.classList.add("uk-margin-bottom"),document.createElement("div")),h=(p.classList.add("uk-grid"),p.classList.add("uk-position-bottom"),p.style.left="20px",document.createElement("a")),f=document.createElement("span"),v=document.createElement("a"),f=(f.setAttribute("uk-icon","icon: cart; ratio: 2"),c.appendChild(f),u.id=e,u.src=a||"img/geen_afbeelding.jpg",s.classList.add("part_wrap"),l.classList.add("uk-card"),l.classList.add("uk-card-default"),l.classList.add("animate__animated"),l.classList.add("animate__fadeIn"),l.classList.add("animate__slow"),r.classList.add("uk-card-media-top"),o.classList.add("uk-card-body"),i.classList.add("uk-card-title"),r.appendChild(u),l.appendChild(r),i.innerText=t,v.classList.add("uk-button"),v.classList.add("uk-button-default"),v.classList.add("uk-button-small"),v.classList.add("part-detail"),v.href=n,v.setAttribute("target","_blank"),v.innerText="details",v.type="button",(5*Math.random()).toFixed(2));m.innerText="â‚¬"+f.toString(),d.appendChild(m),p.appendChild(d),h.href="",h.innerText="+",h.type="button",h.setAttribute("data-part",e),h.setAttribute("data-naam",t),h.setAttribute("data-prijs",f),h.classList.add("uk-button"),h.classList.add("uk-button-primary"),h.classList.add("add-button"),h.classList.add("uk-button-small"),c.appendChild(h),p.appendChild(c),o.appendChild(i),g.appendChild(v),o.appendChild(g),o.appendChild(p),l.appendChild(o),s.appendChild(l),parts_list.appendChild(s)}function addCartListeners(){const l=getLiveKlant();document.querySelectorAll(".add-button").forEach(e=>{e.addEventListener("click",e=>{if(e.preventDefault(),l){var t=document.querySelectorAll("span.badge-count");const s=getMandjes();var a=e.target.dataset.part,n=e.target.dataset["naam"],e=e.target.dataset["prijs"],a=new Artikel(a,n,e);s[l.naam]?s[l.naam].artikelen.push(a):((n=new Mandje(l)).artikelen.push(a),s[l.naam]=n),localStorage.setItem("mandjes",JSON.stringify(s)),t.forEach(e=>{e.innerText=s[l.naam].artikelen.length})}else showMessage("Niet ingelogd","Je moet ingelogd zijn om artikelen aan je mandje toe te kunnen voegen","warning")})})}function getPage(e){let t="1";e=e.split("&");let a=20;return(e[1]||"2"!==t)&&e[1]?(t=e[0].split("=")[1],a=e[1].split("=")[1]):t="1",sessionStorage.setItem("productPage",t),[t,a]}function pageNavListeners(){document.querySelectorAll(".pages-nav").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();e=getPage(e.target.href);window.scrollTo(0,0),buildPage(e[0],e[1])})})}function createPartsList(e){e.results.forEach(e=>{createPartEl(e.part_num,e.name,e.part_img_url,e.part_url)});var t=e.previous,e=e.next,a=document.createElement("div"),n=(a.id="pages_nav_div",a.classList.add("uk-container"),a.classList.add("uk-flex"),a.classList.add("uk-flex-between"),a.classList.add("uk-margin-top"),a.classList.add("uk-margin-bottom"),document.createElement("div")),s=document.createElement("a"),l=document.createElement("span"),t=(s.classList.add("uk-button"),s.classList.add("uk-button-default"),s.classList.add("pages-nav"),s.type="button",t?s.href=t:(s.href="#",s.style.color="#999999",s.style.cursor="not-allowed"),l.setAttribute("uk-icon","icon: chevron-left"),s.innerText="vorige",n.appendChild(l),n.appendChild(s),a.appendChild(n),document.createElement("div")),l=document.createElement("a"),s=document.createElement("span");l.classList.add("uk-button"),l.classList.add("uk-button-default"),l.classList.add("pages-nav"),l.type="button",e?l.href=e:(l.href="#",l.style.color="#999999",l.style.cursor="not-allowed"),s.setAttribute("uk-icon","icon: chevron-right"),l.innerText="volgende",t.appendChild(l),t.appendChild(s),a.appendChild(t),document.body.appendChild(a)}import{getKlanten,getMandjes,getLiveKlant}from"./storageItems.js";import{buildPage}from"./createPartsList.js";import{updateNavbar}from"./navbar.js";import{showMessage}from"./notify.js";const klanten=getKlanten(),mandjes=getMandjes(),live_klant=getLiveKlant();updateNavbar();let page=sessionStorage.getItem("productPage");page=page||1;const page_size=20;window.onload=e=>{buildPage(page,page_size)};import{getLiveKlant}from"./storageItems.js";import{updateNavbar}from"./navbar.js";import{showMessage}from"./notify.js";import{klantLogin}from"./statusChange.js";const live_klant=getLiveKlant(),loginButton=(updateNavbar(),document.getElementById("button-login"));loginButton.addEventListener("click",e=>{e.preventDefault();var t,e=document.getElementById("input-naam").value;e?1===(t=klantLogin(e))?(updateNavbar(),showMessage(`Welkom terug, ${e}!`,"Je bent ingelogd","success")):2===t?showMessage("Al ingelogd","Je bent al ingelogd!","info"):3===t?showMessage("Actieve login","Er is al iemand ingelogd","info"):4===t&&(updateNavbar(),showMessage(`Welkom ${e}!`,"Je bent ingelogd","success")):showMessage("Naam vereist","Vul een naam in!","warning")});import{updateNavbar}from"./navbar.js";import{showMessage}from"./notify.js";if(sessionStorage.getItem("live_klant")){sessionStorage.removeItem("live_klant"),sessionStorage.removeItem("login-greet"),sessionStorage.getItem("admin-greet")&&sessionStorage.removeItem("admin-greet"),updateNavbar(),showMessage("Je bent uitgelogd","Tot ziens!","success");const c0=document.getElementById("bye"),d0=(c0.classList.add("uk-width-1-1@s"),c0.classList.add("uk-width-1-2@m"),c0.classList.add("uk-width-1-2@l"),document.createElement("img"));d0.src="../img/tot_ziens.png",d0.classList.add("animate__animated"),d0.classList.add("animate__rotateIn"),c0.appendChild(d0)}import{getLiveKlant,getMandjes}from"./storageItems.js";function updateNavbar(){var e=window.location.pathname;const t=getLiveKlant(),a=getMandjes();switch(e){case"/index.html":document.querySelectorAll(".link-index").forEach(e=>{e.classList.add("uk-active")});break;case"/":document.querySelectorAll(".link-index").forEach(e=>{e.classList.add("uk-active")});break;case"/contact.html":document.querySelectorAll(".link-contact").forEach(e=>{e.classList.add("uk-active")});break;case"/winkelmandje.html":document.querySelectorAll(".link-winkelmandje").forEach(e=>{e.classList.add("uk-active")});break;case"/login.html":document.querySelectorAll(".link-user").forEach(e=>{e.classList.add("uk-active")})}var e=document.querySelectorAll(".user-login"),n=document.querySelectorAll(".user-logout"),s=document.querySelectorAll(".user-admin"),l=document.querySelectorAll("span.badge-count");t&&(e.forEach(e=>{e.classList.add("uk-hidden")}),n.forEach(e=>{e.classList.remove("uk-hidden")}),document.querySelectorAll(".link-user").forEach(e=>{e.style.color="#0F7AE5"}),t.admin&&(s.forEach(e=>{e.classList.remove("uk-hidden")}),document.querySelectorAll(".link-admin").forEach(e=>{e.style.color="red"})),a[t.naam])&&l.forEach(e=>{e.innerText=a[t.naam].artikelen.length}),document.querySelectorAll('a[href="logout.html"]').forEach(e=>{e.style.color="red"})}import{getKlanten,getMandjes}from"./storageItems.js";import{populateSelect}from"./adminUi.js";const Swal=window["Swal"];function showMessage(e,t,a){Swal.fire({title:e,text:t,icon:a,timer:1500,timerProgressBar:!0,showConfirmButton:!1})}function confirmDeleteKlant(t,e,a,n){const s=getKlanten(),l=getMandjes();Swal.fire({title:e,text:a,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Verwijderen"}).then(e=>{e.isConfirmed&&(delete s[t],localStorage.setItem("klanten",JSON.stringify(s)),l[t]&&(delete l[t],localStorage.setItem("mandjes",JSON.stringify(l))),populateSelect(),Swal.fire("Klant verwijderd!","Klant en mandje zijn verwijderd uit de opslag","success"))})}function confirmDeleteMandje(t,e,a,n){const s=getMandjes();Swal.fire({title:e,text:a,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Verwijderen"}).then(e=>{e.isConfirmed&&(s[t]&&(delete s[t],localStorage.setItem("mandjes",JSON.stringify(s))),populateSelect(),Swal.fire("Mandje verwijderd!","Het mandje is verwijderd uit de opslag","success"))})}function showToast(e,t,a){Swal.fire({title:e,text:t,icon:a,timer:1e3,showConfirmButton:!1,toast:!0,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}import{getKlanten,getLiveKlant}from"./storageItems.js";import{Klant}from"./classes.js";function klantLogin(e){var t,a=getKlanten();let n=getLiveKlant();return n?e===n.naam?2:3:(t=document.getElementById("check-admin").checked,a[e]?(n=a[e],sessionStorage.setItem("live_klant",JSON.stringify(n)),document.getElementById("input-naam").value="",document.getElementById("check-admin").checked=!1,1):(t=new Klant(e,t),a[e]=t,localStorage.setItem("klanten",JSON.stringify(a)),n=t,sessionStorage.setItem("live_klant",JSON.stringify(n)),4))}function getKlanten(){let e=JSON.parse(localStorage.getItem("klanten"));return e||(e={},localStorage.setItem("klanten",JSON.stringify(e))),e}function getMandjes(){let e=JSON.parse(localStorage.getItem("mandjes"));return e||(e={},localStorage.setItem("mandjes",JSON.stringify(e))),e}function getLiveKlant(){return JSON.parse(sessionStorage.getItem("live_klant"))}import{updateNavbar}from"./navbar.js";updateNavbar();export{populateSelect,Klant,Mandje,Artikel,buildPage,getPage,pageNavListeners,createPartsList,updateNavbar,showMessage,confirmDeleteKlant,confirmDeleteMandje,showToast,klantLogin,getKlanten,getMandjes,getLiveKlant};